<!DOCTYPE html>
<html>
    <head>
        <title>Lab Companion Home</title>
        <link rel="stylesheet" href="style.css">
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-auth.js"></script>
        <script type="text/javascript" src="main.js"></script>
        <script type="text/javascript" src="account.js"></script>
        <script type="text/javascript">
            function StartLoad() {
                UpdateUserDisplay();

                Promise.all([
                    google.charts.load('current', {'packages':['corechart']}),
                    Get("shim_sensors")
                ]).then(DrawSensorTable);
            }

            
        window.addEventListener("load", StartLoad);
        </script>
    </head>
    <body>
        <header>
            <a href="/" id="title-link"><img src="logo.png" id="logo">Silo Systems Lab Companion</a>
            <nav>
                <span id="current-user">You are not logged in. </span>
                (<a href="#" id="show-login-link" onclick="ShowLogin();">Log in</a><a href="#" id="logout-link" class="hidden" onclick="Logout();">Log out</a>)
            </nav>
        </header>
        <main>
            <table id="sensor-table" class="hidden">
                <thead>
                    <tr><th>Device ID</th><th>Device Nickname</th><th>Sensor ID</th><th>Sensor Type</th><th>View Data</th><th>Download Data</th></tr>
                </thead>
                <tbody></tbody>
            </table>
            <div id="data-chart"></div>
        </main>
        <footer>
            Copyright 2020 Silo Systems and the University of Idaho
        </footer>
        <template>
            <div id="login">
                <a href="#" id="unshow-login-link" onclick="UnshowLogin();">&#x2716;</a>
                <div id="login-box">
                    <form id="login-form" action="#" onsubmit="Login(); return false;" class="accountForm">
                        <strong>Log in to Lab Companion</strong>
                        <br><br>
                        <input type="email" name="user" placeholder="Email address" required>
                        <input type="password" name="password" placeholder="Password" required>
                        <label>Remember me? <input type="checkbox" name="remember"></label>
                        <input type="submit" value="Submit">
                        <input type="button" value="Sign up as a new user" onclick="ShowSignup();">
                    </form>
                    <form id="signup-form" action="#" onsubmit="Signup(); return false;" class="hidden accountForm">
                        <strong>Sign up for Lab Companion</strong>
                        <br><br>
                        <input type="email" name="user" placeholder="Email address" required>
                        <input type="password" name="password" placeholder="Password" required>
                        <input type="password" name="passwordConfirmation" placeholder="Password (again)" required>
                        <input type="submit" value="Submit">
                        <input type="button" value="Log in to an existing account" onclick="UnshowSignup()">
                    </form>
                    <div id="login-error-box" class="hidden">
                        <span id="login-error-box-text"></span>
                        <br>Please try again.
                    </div>
                </div>
            </div>
        </template>
    </body>
</html>